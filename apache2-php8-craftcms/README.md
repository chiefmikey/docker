# **Apache 2 - PHP 8 - CraftCMS**

An Apache 2 server rendering a fresh CraftCMS installation with PHP 8 by proxying to PHP-FPM for headless operation.

*This image requires minimal configuration to launch and successfully render the CraftCMS admin installation page.*

[Available on Docker Hub](https://hub.docker.com/repository/docker/chiefmikey/apache2-php8-craftcms)

## **Getting Started**

A .env file is included in the root directory and must be updated with an `APP_ID` and `SECURITY_KEY` both generated by CraftCMS with the following commands:

```shell
php craft setup/app-id
php craft setup/security-key
```

- Database configuration can be prepared in the .env file or it will be populated as part of the final CraftCMS installation.

- The `license.key` file located in the `/config` directory will be populated as part of the final CraftCMS installation as well.

- The container must be exposed to `port 3000` where Apache is set to listen for connections.

Use `docker build` or `docker-compose` to spin up the container and navigate to the CraftCMS admin page:

http://localhost:3000/admin

Follow the prompts until installation is complete.

## Examples

Dockerfile

```shell
cd apache2-php8-craftcms
php craft setup/app-id
php craft setup/security-key
docker build -t NAME/TAG:VERSION .
docker run -d -p 3000:3000 NAME/TAG:VERSION
```

docker-compose.yaml

```js
services:
  api:
    image: chiefmikey/apache2-php8-craftcms:latest
    volumes:
      - .env:/craft/.env:ro
      - license.key:/craft/config/license.key:ro
      - composer.json:/craft/composer.json:ro
    ports:
      - "3000:3000"
```
